// ============================================
// ğŸ”§ ×ª×™×§×•×Ÿ × ×§×•×“×ª×™ #1 - CSS (×ª×¦×•×’×” ×ª×§×™× ×”)
// ============================================
// ×‘×§×•×‘×¥ HTML, ×‘×—×œ×§ ×”-<style>, ×—×¤×©:
// 
// ×‘×“×¨×š ×›×œ×œ ×™×© ××©×”×• ×›××•:
// #transcript { white-space: pre-wrap; }
// ××• display: flex; flex-direction: column;

// âœ… ×”×—×œ×£ ×œ:

<style>
/* ×ª×™×§×•×Ÿ ×¦×¤×™ ×ª×§×™× ×” */
#transcript {
    white-space: normal !important;     /* âœ… ×ª×™×§×•×Ÿ ×©×‘×™×¨×” */
    word-break: break-word !important;   /* âœ… ×ª×™×§×•×Ÿ ××™×œ×™× ××¨×•×›×•×ª */
    word-wrap: break-word !important;    /* âœ… ×ª×™×§×•×Ÿ RTL */
    text-align: right;                   /* âœ… ×¢×‘×¨×™×ª ×œ×™××™×Ÿ */
    direction: rtl;                      /* âœ… ×›×™×•×•×Ÿ ×™××™×Ÿ ×œ×©×××œ */
    line-height: 1.5;                    /* âœ… ×’×•×‘×” ×©×•×¨×” ×ª×§×™×Ÿ */
}
</style>


// ============================================
// ğŸ”§ ×ª×™×§×•×Ÿ × ×§×•×“×ª×™ #2 - Learning System (×§×˜×Ÿ ×•×—×›×)
// ============================================
// ×‘×ª×•×š ×”×§×•× ×¡×˜×¨×•×§×˜×•×¨ ×©×œ ChaiEmetVoice, ×”×•×¡×£:

constructor() {
    this.recognition = null;
    this.synthesis = window.speechSynthesis;
    this.isListening = false;
    this.isSpeaking = false;
    this.visualizer = null;
    this.audioContext = null;
    this.analyser = null;
    this.dataArray = null;
    
    // âœ… ×ª×•×¡×£ Learning System
    this.learnedWords = new Set();  // ××™×œ×™× ×©×”×•× ×œ××“
    this.brainMemory = 0;           // ×¨××ª ×”×—×›××”
    
    this.init();
}

// âœ… ×”×•×¡×£ ×¤×•× ×§×¦×™×” ×‘×§×œ××¡ (××—×¨×™ processCommand):

learn(text) {
    // ×¤×¨×§ ××ª ×”×˜×§×¡×˜ ×œ××™×œ×™×
    const words = text.split(' ').filter(w => w.length > 1);
    
    let newWordsCount = 0;
    words.forEach(word => {
        if (!this.learnedWords.has(word.toLowerCase())) {
            this.learnedWords.add(word.toLowerCase());
            newWordsCount++;
        }
    });
    
    // ×¢×“×›×Ÿ ×¨××ª ×”×—×›××”
    this.brainMemory = this.learnedWords.size;
    
    // ×”×¦×’ ×œ××™×“×”
    if (newWordsCount > 0) {
        console.log(`ğŸ§  ×œ××“×ª×™ ${newWordsCount} ××™×œ×™× ×—×“×©×•×ª! ×¡×š ×”×›×œ: ${this.brainMemory} ××™×œ×™×`);
    }
    
    return {
        newWords: newWordsCount,
        totalKnown: this.brainMemory,
        intelligence: Math.min(100, Math.floor((this.brainMemory / 50) * 100))
    };
}

// âœ… ×¢×“×›×Ÿ ××ª respond() ×œ×›×œ×•×œ learning:

respond(text) {
    this.updateStatus('ğŸ—£ï¸ ××“×‘×¨×ª...');
    
    // âœ… ×œ××“ ××”×˜×§×¡×˜ ×”× ×›× ×¡
    const learning = this.learn(text);
    
    // âœ… ×”×•×¡×£ ×œ××™×“×” ×œ×ª×’×•×‘×”
    let responseWithIntelligence = text;
    if (learning.newWords > 0) {
        responseWithIntelligence += ` | ğŸ§  ×œ××“×ª×™ ×¢×›×©×™×•: ${learning.newWords} ××™×œ×™×. ×—×›××”: ${learning.intelligence}%`;
    }
    
    this.speak(text);
    this.log(`ğŸ—£ï¸ ×¢× ×™×ª×™: "${text}"`);
    this.log(`ğŸ§  ×–×›×¨×•×Ÿ: ${learning.totalKnown} ××™×œ×™× | ×—×›××”: ${learning.intelligence}%`);
}

// âœ… ×¢×“×›×Ÿ ××ª processCommand() ×‘×ª×—×™×œ×”:

processCommand(text) {
    this.log(`ğŸ¯ ×©××¢×ª×™: "${text}"`);
    
    // âœ… ×œ××“ ××”×§×•×œ ×©× ×©××¢
    const learning = this.learn(text);
    
    // ×”×¦×’ ×©×”×œ××“×ª×™
    if (learning.newWords > 0) {
        this.log(`ğŸ§  ×œ××“×ª×™: ${learning.newWords} ××™×œ×™× ×—×“×©×•×ª! ×—×›××” ×¢×›×©×™×•: ${learning.intelligence}%`);
    }
    
    // ... ×©××¨ ×”×§×•×“ ×›×¨×’×™×œ ...
}
